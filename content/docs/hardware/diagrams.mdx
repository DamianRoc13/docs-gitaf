---
title: Diagramas de ConexiÃ³n
description: Esquemas elÃ©ctricos y diagramas de conexiÃ³n del hardware GITAF
---

import { Callout } from 'fumadocs-ui/components/callout';

## Diagrama General del Sistema

```mermaid
graph TB
    subgraph "MÃ³dulo Maestro"
        M[ESP32 Maestro]
        PB[Powerbank 10000mAh]
        PB -->|5V USB| M
    end
    
    subgraph "Poste Izquierdo"
        E1[ESP32 Esclavo 1]
        A1[Altavoz PAM8403]
        B1[BaterÃ­a 3.7V]
        C1[TP4056]
        B1 --> E1
        B1 --> C1
        E1 -->|PWM| A1
    end
    
    subgraph "Poste Central"
        E2[ESP32 Esclavo 2]
        A2[Altavoz PAM8403]
        B2[BaterÃ­a 3.7V]
        C2[TP4056]
        B2 --> E2
        B2 --> C2
        E2 -->|PWM| A2
    end
    
    subgraph "Poste Derecho"
        E3[ESP32 Esclavo 3]
        A3[Altavoz PAM8403]
        B3[BaterÃ­a 3.7V]
        C3[TP4056]
        B3 --> E3
        B3 --> C3
        E3 -->|PWM| A3
    end
    
    M -.->|ESP-NOW| E1
    M -.->|ESP-NOW| E2
    M -.->|ESP-NOW| E3
    
    style M fill:#4CAF50
    style E1 fill:#2196F3
    style E2 fill:#2196F3
    style E3 fill:#2196F3
```

## MÃ³dulo Maestro - Diagrama de ConexiÃ³n

### ConexiÃ³n BÃ¡sica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32 DevKit V1   â”‚
â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   USB Port   â”‚â”€â”€â”€â”€â”€â”€â”€â†’ Cable USB Micro-B
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚         â”‚
â”‚                     â”‚         â”‚
â”‚  [PIN Layout]       â”‚         â†“
â”‚  3V3  GND  EN  ...  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ...  ...  ... ...  â”‚    â”‚ Powerbank  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ 10000mAh   â”‚
                           â”‚  5V / 2A   â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<Callout type="info">
El mÃ³dulo maestro no requiere conexiones adicionales. Todo se maneja por USB: alimentaciÃ³n, programaciÃ³n y datos.
</Callout>

### Pines Utilizados (Maestro)

| Pin | FunciÃ³n | DescripciÃ³n |
|-----|---------|-------------|
| 5V (USB) | AlimentaciÃ³n | Entrada de powerbank |
| GND | Tierra | Referencia comÃºn |
| GPIO2 | LED Indicador | LED integrado (interno) |
| TX/RX | UART | Para debugging serial (opcional) |

## MÃ³dulo Esclavo - Diagrama Detallado

### Esquema Completo de un Poste

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€ Interruptor ON/OFF â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                    â”‚
                    â”‚                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
â”‚   BaterÃ­a Li-Po 3.7V       â”‚         â”‚  MÃ³dulo TP4056     â”‚
â”‚   2000 mAh                 â”‚         â”‚  (Cargador)        â”‚
â”‚                            â”‚         â”‚                    â”‚
â”‚   [+]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚  IN+ â†â”€ 5V USB    â”‚
â”‚   [-]â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚         â”‚  IN- â†â”€ GND USB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”˜         â”‚                    â”‚
              â”‚            â”‚           â”‚  BAT+ â”€â”€â†’ BaterÃ­a+â”‚
              â”‚            â”‚           â”‚  BAT- â”€â”€â†’ BaterÃ­a-â”‚
              â”‚            â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ GND        â”‚ VCC (3.7-4.2V)
              â”‚            â”‚
              â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ESP32 DevKit V1        â”‚
        â”‚                          â”‚
        â”‚  VIN â†â”€â”€â”€â”€â”€â”€â”€ VCC        â”‚
        â”‚  GND â†â”€â”€â”€â”€â”€â”€â”€ GND        â”‚
        â”‚                          â”‚
        â”‚  GPIO25 â”€â”€â†’ PWM Signal   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3V3 â”€â”€â”€â†’ Amplifier VCC  â”‚        â”‚
        â”‚  GND â”€â”€â”€â†’ Amplifier GND  â”‚        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                            â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Amplificador PAM8403    â”‚
        â”‚                          â”‚
        â”‚  VCC â†â”€â”€ 3V3 (ESP32)    â”‚
        â”‚  GND â†â”€â”€ GND            â”‚
        â”‚  IN+ â†â”€â”€ GPIO25 (PWM)   â”‚
        â”‚  IN- â†â”€â”€ GND            â”‚
        â”‚                          â”‚
        â”‚  OUT+ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
        â”‚  OUT- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â†’  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚ Speaker â”‚
                    â”‚   4Î©    â”‚
                    â”‚   3W    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tabla de Conexiones (MÃ³dulo Esclavo)

#### BaterÃ­a â†’ TP4056

| BaterÃ­a | TP4056 Pin |
|---------|-----------|
| Positivo (+) | BAT+ |
| Negativo (-) | BAT- |

#### TP4056 â†’ ESP32

| TP4056 | ESP32 Pin | Notas |
|--------|-----------|-------|
| OUT+ | VIN | Salida regulada de baterÃ­a |
| OUT- | GND | Tierra comÃºn |

<Callout type="warn">
**Importante**: El TP4056 proporciona protecciÃ³n de baterÃ­a. Si conectas la baterÃ­a directamente al ESP32 sin protecciÃ³n, podrÃ­as daÃ±arla por sobre-descarga.
</Callout>

#### ESP32 â†’ Amplificador PAM8403

| ESP32 Pin | PAM8403 Pin | DescripciÃ³n |
|-----------|-------------|-------------|
| 3V3 | VCC | AlimentaciÃ³n del amplificador |
| GND | GND | Tierra comÃºn |
| GPIO25 | IN+ (Left) | SeÃ±al PWM de audio |
| GND | IN- (Left) | Referencia para canal izquierdo |

#### Amplificador â†’ Altavoz

| PAM8403 | Altavoz | Cable |
|---------|---------|-------|
| OUT+ | Terminal + | Rojo |
| OUT- | Terminal - | Negro |

## Diagrama Fritzing - Vista de Montaje

### MÃ³dulo Esclavo (Vista Breadboard)

```
         [Interruptor]
              â”‚
         â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€
        â”‚           â”‚
    [BaterÃ­a]   [TP4056]
    3.7V 2Ah        â”‚
        â”‚       [USB Micro]
        â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚  ESP32    â”‚
        â”‚           â”‚
        â”‚  [GPIO25]â”€â”¼â”€â”€â†’ [PAM8403] â”€â”€â†’ [Speaker]
        â”‚           â”‚         â”‚             4Î©
        â”‚   [3V3]â”€â”€â”€â”¼â”€â”€â†’ VCC  â”‚
        â”‚   [GND]â”€â”€â”€â”¼â”€â”€â†’ GND  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Consideraciones de Cableado

### Longitud de Cables

| ConexiÃ³n | Longitud Recomendada | Calibre |
|----------|----------------------|---------|
| BaterÃ­a â†” TP4056 | 10-15 cm | 22 AWG |
| TP4056 â†” ESP32 | 15-20 cm | 22 AWG |
| ESP32 â†” PAM8403 | 10-15 cm | 24 AWG |
| PAM8403 â†” Speaker | 20-30 cm | 20 AWG |

<Callout type="info">
**Cables mÃ¡s cortos = Menos resistencia = Mejor eficiencia**

MantÃ©n las conexiones lo mÃ¡s cortas posible, especialmente entre la baterÃ­a y el ESP32.
</Callout>

### Colores EstÃ¡ndar

| Color | Uso |
|-------|-----|
| ğŸ”´ Rojo | VCC / Positivo (+) |
| âš« Negro | GND / Negativo (-) |
| ğŸŸ¡ Amarillo | SeÃ±al / PWM |
| ğŸŸ¢ Verde | GPIO / Control |
| ğŸ”µ Azul | ComunicaciÃ³n |

## Pinout Detallado ESP32 DevKit V1

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   USB   â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                  â”‚
EN â”‚â—‹                                              â—‹â”‚ 3V3
36 â”‚â—‹                                              â—‹â”‚ GND
39 â”‚â—‹                                              â—‹â”‚ 15
34 â”‚â—‹              ESP32                           â—‹â”‚ 2
35 â”‚â—‹            DevKit V1                         â—‹â”‚ 4
32 â”‚â—‹                                              â—‹â”‚ 16
33 â”‚â—‹                                              â—‹â”‚ 17
25 â”‚â—‹ â† (PWM Audio)                                â—‹â”‚ 5
26 â”‚â—‹                                              â—‹â”‚ 18
27 â”‚â—‹                                              â—‹â”‚ 19
14 â”‚â—‹                                              â—‹â”‚ 21
12 â”‚â—‹                                              â—‹â”‚ 22
   â”‚                                                  â”‚
GNDâ”‚â—‹                                              â—‹â”‚ TX
13 â”‚â—‹                                              â—‹â”‚ RX
9  â”‚â—‹                                              â—‹â”‚ 23
10 â”‚â—‹                                              â—‹â”‚ VIN
11 â”‚â—‹                                              â—‹â”‚ GND
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pines EspecÃ­ficos Usados

| Pin | Nombre | FunciÃ³n en GITAF | ADC/PWM |
|-----|--------|------------------|---------|
| GPIO25 | OUT | SeÃ±al PWM para audio | DAC2 âœ“ |
| GPIO2 | LED | LED de estado (interno) | PWM âœ“ |
| GPIO34 | IN | Monitoreo baterÃ­a (opcional) | ADC1_6 âœ“ |
| VIN | PWR | Entrada 5V desde USB/TP4056 | - |
| 3V3 | PWR | Salida regulada 3.3V | - |
| GND | PWR | Tierra comÃºn | - |

<Callout type="warn">
**Pines solo de entrada**: GPIO34, GPIO35, GPIO36, GPIO39 **no** tienen pull-up/pull-down interno y solo pueden usarse como entrada. No conectes LEDs o salidas a estos pines.
</Callout>

## Testing y VerificaciÃ³n

### Checklist Pre-Encendido

Antes de encender por primera vez, verifica:

- [ ] Polaridad correcta de baterÃ­a (+/- no invertidos)
- [ ] No hay cortocircuitos entre VCC y GND
- [ ] Todas las soldaduras estÃ¡n aisladas
- [ ] Interruptor en posiciÃ³n OFF
- [ ] TP4056 estÃ¡ correctamente conectado
- [ ] Altavoz tiene la impedancia correcta (4Î©)
- [ ] Cables no estÃ¡n pellizcados o daÃ±ados

### Mediciones con MultÃ­metro

| Punto de Prueba | Valor Esperado | Notas |
|----------------|----------------|-------|
| BaterÃ­a sin carga | 3.7V - 4.2V | 4.2V = completamente cargada |
| Salida TP4056 | 3.7V - 4.2V | Igual que baterÃ­a |
| ESP32 VIN | 3.7V - 4.2V | Desde TP4056 |
| ESP32 3V3 | 3.28V - 3.35V | Regulado interno |
| Continuidad GND | 0Î© | Todos los GND conectados |

## Montaje en Cajas

### DistribuciÃ³n Interna Recomendada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tapa Superior                  â”‚
â”‚  [â—‹ LED Estado] [â—‹ Interruptor] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  [ESP32]     [TP4056]          â”‚
â”‚                                 â”‚
â”‚  [PAM8403]   [BaterÃ­a]         â”‚
â”‚                                 â”‚
â”‚  [Altavoz en panel lateral â†’]  â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Base con velcro para montaje   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tips de Montaje

1. **FijaciÃ³n**: Usa velcro adhesivo de doble cara
2. **SeparaciÃ³n**: MantÃ©n 1cm entre baterÃ­a y ESP32 (ventilaciÃ³n)
3. **Acceso**: MantÃ©n accesibles:
   - Puerto USB del TP4056 (para carga)
   - BotÃ³n de reset del ESP32
   - Interruptor de encendido
4. **ProtecciÃ³n**: AÃ­sla todas las soldaduras con termo encogible

## Recursos Adicionales

- [Datasheet ESP32](https://www.espressif.com/sites/default/files/documentation/esp32_datasheet_en.pdf)
- [PAM8403 Datasheet](https://www.diodes.com/assets/Datasheets/PAM8403.pdf)
- [TP4056 Manual](https://dlnmh9ip6v2uc.cloudfront.net/datasheets/Prototyping/TP4056.pdf)

## PrÃ³ximos Pasos

- ConfiguraciÃ³n del [Entorno de Desarrollo](/docs/firmware/setup)
- Aprende sobre [GestiÃ³n de EnergÃ­a](/docs/hardware/power)
- Resuelve problemas con [Troubleshooting](/docs/support/troubleshooting)
