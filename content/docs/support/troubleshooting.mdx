---
title: Soluci√≥n de Problemas
description: Gu√≠a de diagn√≥stico y resoluci√≥n de fallas comunes en GITAF PRO
---

import { Callout } from 'fumadocs-ui/components/callout';

## Diagn√≥stico R√°pido por LED

El sistema cuenta con un c√≥digo de colores (LED RGB) para informar su estado sin necesidad de conectar una computadora.

| Color | Comportamiento | Significado | Acci√≥n Requerida |
| :--- | :--- | :--- | :--- |
| **üîµ Azul** | Fijo | **Bluetooth Conectado**. El Maestro tiene enlace con la App. | Sistema listo para operar. |
| **üü¢ Verde** | Fijo | **Standby (Bater√≠a OK)**. Nivel de carga > 50%. | Todo normal. |
| **üü† Naranja** | Fijo | **Bater√≠a Media**. Nivel de carga > 20%. | Planificar recarga al finalizar sesi√≥n. |
| **üî¥ Rojo** | Fijo | **Bater√≠a Cr√≠tica**. Nivel de carga < 20%. | **Recargar inmediatamente.** Riesgo de apagado. |
| **üî¥ Rojo** | Parpadeo R√°pido | **Error de Hardware**. Fallo en INA219 o DFPlayer. | Revisar conexiones internas. |
| **‚ö™ Blanco** | Flash (1 seg) | **Reinicio / Boot**. El sistema acaba de encenderse. | Esperar a que cambie de color. |
| ‚ö´ **Apagado** | - | **Sin Energ√≠a** o **Deep Sleep**. | Verificar interruptor y bater√≠a. |

## Problemas de Audio

### Zumbido o "Soplido" constante en el parlante
**Causa:** Ruido el√©ctrico de la transmisi√≥n WiFi entrando al amplificador.
**Soluci√≥n:**
1.  Verificar que el **Capacitor de 1000uF** est√© soldado lo m√°s cerca posible de los pines de alimentaci√≥n del m√≥dulo PAM8403.
2.  Confirmar que la resistencia de **1kŒ©** est√° instalada entre el pin TX del ESP32 y el RX del amplificador.
3.  Trenzar los cables que van hacia el parlante.

### El audio suena distorsionado o "roto"
**Causa:** Falta de corriente o volumen digital excesivo.
**Soluci√≥n:**
1.  La bater√≠a puede estar baja (< 7.0V). El amplificador no recibe suficiente potencia.
2.  En el c√≥digo, reducir el volumen del DFPlayer: `myDFPlayer.volume(20);` (El m√°ximo es 30, pero satura).

### El m√≥dulo MP3 no reproduce nada
**Checklist:**
- [ ] La tarjeta SD est√° formateada en **FAT32**.
- [ ] Los archivos est√°n dentro de una carpeta llamada `mp3`.
- [ ] Los archivos se llaman `0001.mp3`, `0002.mp3` (4 d√≠gitos).
- [ ] El LED azul del propio m√≥dulo DFPlayer deber√≠a encenderse brevemente al intentar reproducir.

## Problemas de Conectividad

### La App no encuentra "Gitaf Pro"
**Causa:** Cach√© de Bluetooth del celular o falta de permisos.
**Soluci√≥n:**
1.  Apagar y encender el Bluetooth del celular.
2.  En Android, ir a *Ajustes > Aplicaciones > GITAF App* y conceder permiso de **"Ubicaci√≥n"** y **"Dispositivos Cercanos"**.
3.  Reiniciar el ESP32 Maestro.

### El Maestro no activa los Esclavos
**Causa:** Direcciones MAC incorrectas o canal WiFi distinto.
**Diagn√≥stico:**
1.  Conectar el Maestro al PC y abrir el Monitor Serial.
2.  Al enviar un comando desde la App, ¬øaparece `Delivery Success` o `Delivery Fail`?
    * **Fail:** El esclavo est√° apagado, lejos, o la MAC en el c√≥digo `slave1MAC` no coincide con la real del esclavo.
    * **Success:** El mensaje llega, pero el esclavo no suena (revisar secci√≥n de Audio).

### Alcance corto (< 20 metros)
**Causa:** Antena obstruida.
**Soluci√≥n:**
* Asegurarse de que la antena PCB del ESP32 (el zig-zag dorado en el borde) no est√© tapada por cables, bater√≠as o cajas met√°licas. Debe "ver" hacia el exterior.
* Elevar los postes al menos a 1 metro del suelo (el suelo absorbe la se√±al).

## Problemas de Energ√≠a (Bater√≠a 2S)

### El sistema se apaga al subir el volumen
**Causa:** La bater√≠a no soporta el pico de corriente (Amperaje).
**Soluci√≥n:**
* Usar bater√≠as LiPo de alta descarga (20C o m√°s), como las de drones. Bater√≠as de litio gen√©ricas (tipo 18650 recicladas) pueden no tener fuerza suficiente.

### El porcentaje de bater√≠a no baja del 100% o marca 0%
**Causa:** Mala calibraci√≥n del sensor INA219.
**Soluci√≥n:**
* Si marca 0%: El sensor est√° mal conectado (SDA/SCL invertidos) o el fusible del sensor se quem√≥.
* Si marca valores raros: Verificar que en el c√≥digo el mapeo sea correcto para 2 celdas: `map(voltage, 6400, 8400, 0, 100)`.

## Preguntas Frecuentes

<Callout type="info" title="¬øPuedo usarlo mientras carga?">
**NO.** El sistema de carga de bater√≠as LiPo 2S requiere desconectar la carga (el circuito) para balancear las celdas correctamente. Usarlo mientras carga puede da√±ar el cargador o introducir ruido de red (60Hz) en el audio.
</Callout>

<Callout type="info" title="¬øQu√© pasa si pierdo la conexi√≥n Bluetooth?">
El sistema es aut√≥nomo. Si el celular se desconecta o se apaga, los postes dejar√°n de sonar autom√°ticamente tras terminar su ciclo actual de 3 repeticiones. No se quedar√°n "pegados" sonando.
</Callout>

---

### ¬øNecesitas ayuda t√©cnica?

Si el problema persiste, conecta el dispositivo al puerto USB, abre el **Monitor Serial** de Arduino (115200 baudios) y copia el registro de arranque para enviarlo al equipo de soporte.

**Ejemplo de Log Saludable:**
```text
[INICIO] Sistema GITAF Master Arrancando...
[OK] Sensor Bateria Listo
[OK] Modulo de Audio Listo
[BLE] Dispositivo Movil CONECTADO
[ESTADO] Bateria: 95%