---
title: Configuración del Entorno
description: Guía paso a paso para preparar el IDE y cargar el firmware de GITAF PRO
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';

## Requisitos del Sistema

Para trabajar con el firmware de GITAF PRO, necesitas un ordenador con capacidad para compilar código C++ para arquitecturas Xtensa.

| Componente | Requisito Mínimo | Recomendado |
|------------|------------------|-------------|
| **Sistema Operativo** | Windows 10, macOS Mojave, Ubuntu 20.04 | Windows 11, macOS Sonoma, Ubuntu 22.04 |
| **RAM** | 4 GB | 8 GB+ (La compilación ESP32 es pesada) |
| **Puerto USB** | USB 2.0 | USB 3.0 + Hub alimentado |
| **Driver USB** | CP210x Universal | CP210x Universal |

## Instalación del Software (Arduino IDE)

Utilizamos Arduino IDE por su simplicidad y compatibilidad directa con las librerías de hardware.

<Steps>

<Step>
### 1. Instalar Arduino IDE 2.x

Descarga la versión más reciente (2.3.x o superior) desde el [sitio oficial](https://www.arduino.cc/en/software). Evita la versión "Legacy 1.8.x" para tener mejores herramientas de autocompletado.
</Step>

<Step>
### 2. Configurar el Gestor de Tarjetas (Board Manager)

El ESP32 no viene instalado por defecto.

1. Abre **Arduino IDE**.
2. Ve a **File (Archivo) → Preferences (Preferencias)**.
3. En el campo **"Additional Board Manager URLs"**, pega exactamente este enlace:
```text
[https://espressif.github.io/arduino-esp32/package_esp32_index.json](https://espressif.github.io/arduino-esp32/package_esp32_index.json)

```

4. Haz clic en **OK**.

</Step>

<Step>

### 3. Instalar el Core ESP32

1. Ve al menú lateral izquierdo y abre el **Boards Manager** (Icono de tarjeta).
2. Escribe `esp32` en la barra de búsqueda.
3. Busca **"esp32 by Espressif Systems"**.
4. **IMPORTANTE:** Selecciona la versión **3.0.0** o superior.
5. Haz clic en **Install**.

</Step>

<Step>

### 4. Instalar Librerías Específicas del Proyecto

Instálalas desde el **Library Manager** (Icono de libros):

| Librería | Búsqueda Exacta | Versión Rec. | Uso |
| --- | --- | --- | --- |
| **DFRobotDFPlayerMini** | `DFRobotDFPlayerMini` | 1.0.6 | Control del MP3 |
| **Adafruit INA219** | `Adafruit INA219` | 1.2.3 | Sensor de Batería |
| **Adafruit BusIO** | `Adafruit BusIO` | Latest | Dependencia |

<Callout type="info">
Las librerías `BLEDevice`, `WiFi` y `esp_now` vienen integradas en el Core del ESP32. No necesitas instalarlas aparte.
</Callout>
</Step>

</Steps>

## Configuración de la Placa

Asegúrate de tener esta configuración en **Tools (Herramientas)**:

| Parámetro | Valor |
| --- | --- |
| **Board** | ESP32 Dev Module |
| **Upload Speed** | 921600 (Bajar a 115200 si falla) |
| **CPU Frequency** | 240MHz (WiFi/BT) |
| **Flash Mode** | QIO |
| **Flash Size** | 4MB (32Mb) |
| **Partition Scheme** | Default 4MB with spiffs |
| **Port** | El puerto COM correspondiente |

## Primeros Pasos: Obtener Direcciones MAC

Es **obligatorio** obtener la dirección física (MAC Address) de cada placa para configurar la red ESP-NOW.

```cpp
#include <WiFi.h>
#include "esp_mac.h"

void setup() {
  Serial.begin(115200);
  delay(1000);
  WiFi.mode(WIFI_STA);
  
  Serial.println("\n--- IDENTIFICACION DE HARDWARE ---");
  Serial.print("MAC Address: ");
  Serial.println(WiFi.macAddress());
  Serial.println("----------------------------------");
}

void loop() {}

```

## Troubleshooting (Solución de Problemas Comunes)

### Error: "Failed to connect to ESP32"

**Solución:** Mantén presionado el botón **BOOT** en la placa mientras ves el texto "Connecting..." en el IDE.

### Error de Compilación: "esp_now_register_send_cb"

**Causa:** Estás usando la versión 3.0 del Core ESP32 con código viejo.
**Solución:** Usa el casteo en el código:

```cpp
esp_now_register_send_cb((esp_now_send_cb_t)OnDataSent);

```
